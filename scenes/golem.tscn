[gd_scene load_steps=7 format=3 uid="uid://c03ibs6ruv5mp"]

[ext_resource type="Texture2D" uid="uid://cf3x4gvtuqhqb" path="res://icon.svg" id="1_2gt2m"]
[ext_resource type="Script" path="res://src/golem.gd" id="1_8frd6"]
[ext_resource type="Script" path="res://src/golem_movement.gd" id="2_v0qo3"]
[ext_resource type="Script" path="res://src/golem_attack.gd" id="3_vl6wx"]
[ext_resource type="AudioStream" uid="uid://b3tcbf0iisujo" path="res://sounds/stone-push-37412.mp3" id="4_bsebh"]

[sub_resource type="CircleShape2D" id="CircleShape2D_f2jch"]
radius = 24.1661

[node name="Golem" type="RigidBody2D" node_paths=PackedStringArray("integrate_forces_modules")]
script = ExtResource("1_8frd6")
integrate_forces_modules = [NodePath("GolemMovement")]

[node name="GolemMovement" type="Node" parent="." node_paths=PackedStringArray("navigation_agent")]
script = ExtResource("2_v0qo3")
navigation_agent = NodePath("../NavigationAgent2D")

[node name="GolemAttack" type="Node" parent="." node_paths=PackedStringArray("attack_area", "attack_timer", "attack_sound")]
script = ExtResource("3_vl6wx")
attack_area = NodePath("../AttackArea")
attack_timer = NodePath("AttackTimer")
attack_sound = NodePath("AttackSound")

[node name="AttackTimer" type="Timer" parent="GolemAttack"]
one_shot = true

[node name="AttackSound" type="AudioStreamPlayer" parent="GolemAttack"]
stream = ExtResource("4_bsebh")
pitch_scale = 4.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_f2jch")

[node name="Icon" type="Sprite2D" parent="."]
modulate = Color(1, 0.407246, 0.338652, 1)
scale = Vector2(0.350569, 0.350569)
texture = ExtResource("1_2gt2m")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
avoidance_enabled = true
debug_enabled = true

[node name="AttackArea" type="Area2D" parent="."]
collision_layer = 0

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="AttackArea"]
polygon = PackedVector2Array(-22, -1, -55, -79, 60, -79, 22, 0)

[connection signal="timeout" from="GolemAttack/AttackTimer" to="GolemAttack" method="on_attack_timer_timeout"]
